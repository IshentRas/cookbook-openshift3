no-resolv
domain-needed
no-negcache
<% if @openshift_node_dnsmasq_log_queries %>
log-queries
<%- end %>
cache-size=<%= @openshift_node_dnsmasq_cache_size %>
max-cache-ttl=<%= @openshift_node_dnsmasq_maxcachettl %>
<% if @ose_major_version.split('.')[1].to_i >= 6 %>
enable-dbus
bind-interfaces
except-interface=lo
<%- else -%>
server=/cluster.local/<%= node['cookbook-openshift3']['openshift_common_first_svc_ip'] %>
server=/<%= node['cookbook-openshift3']['openshift_common_first_svc_ip'].split('.')[1] + "." + node['cookbook-openshift3']['openshift_common_first_svc_ip'].split('.')[0] %>.in-addr.arpa/<%= node['cookbook-openshift3']['openshift_common_first_svc_ip'] %>
<%- end %>
