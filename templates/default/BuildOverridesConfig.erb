BuildOverrides:
  configuration:
    apiVersion: v1
    kind: BuildOverridesConfig
<% unless node['is_apaas_openshift_cookbook']['openshift_buildoverrides_force_pull'].empty? %>
    forcePull: "<%= node['is_apaas_openshift_cookbook']['openshift_buildoverrides_force_pull'] %>"
<%- end -%>
<% unless node['is_apaas_openshift_cookbook']['openshift_buildoverrides_image_labels'].empty? -%>
    imageLabels:
<% node['is_apaas_openshift_cookbook']['openshift_buildoverrides_image_labels'].each do |image| %>
<% image.each_pair do |k,v| %>
    - name: <%= k %>
      value: <%= v %>
<%- end -%>
<%- end -%>
<%- end -%>
<% unless node['is_apaas_openshift_cookbook']['openshift_buildoverrides_nodeselectors'].empty? -%>
    nodeSelector:
<% node['is_apaas_openshift_cookbook']['openshift_buildoverrides_nodeselectors'].each_pair do |k,v| %>
      <%= k %>: <%= v %>
<%- end -%>
<%- end -%>
<% unless node['is_apaas_openshift_cookbook']['openshift_buildoverrides_annotations'].empty? -%>
    annotations:
<% node['is_apaas_openshift_cookbook']['openshift_buildoverrides_annotations'].each_pair do |k,v| %>
      <%= k %>: <%= v %>
<%- end -%>
<%- end -%>
<% unless node['is_apaas_openshift_cookbook']['openshift_buildoverrides_tolerations'].empty? && node['is_apaas_openshift_cookbook']['ose_major_version'].split('.')[1].to_i < 9 -%>
    tolerations:
<% node['is_apaas_openshift_cookbook']['openshift_buildoverrides_tolerations'].each do |annotation| %>
    - key: <%= annotation['key'] %>
      value: <%= annotation['value'] %>
      effect: <%= annotation['effect'] %>
      operator: <%= annotation['operator'] %>
<%- end -%>
<%- end -%>
